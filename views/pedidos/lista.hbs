<link href="/vendor/bootstrap/css/bootstrap.css" rel="stylesheet">
<link href="https://cdn.datatables.net/1.10.16/css/jquery.dataTables.min.css" rel="stylesheet">

{{>header }}
<div class="container" style="margin-top:50px;">
  <h2>Pedidos</h2>
  <p>Lista de pedidos</p>
  {{{error}}}
  <hr>
  <table class="table table-striped">
    {{#if pedidos}}
    <thead>
      <tr style="text-align: center;">
        <th>Usuario</th>
        <th>Fecha del pedido</th>
        <th>Monto</th>
        <th>Pagado</th>
        <th>Entregado</th>
      </tr>
    </thead>
    <tbody>
        {{#each pedidos}}
          <tr>
            <td style="text-align: center;">{{this.usuario.nombre}} {{this.usuario.apellido}}</td>
            <td style="text-align: center;">{{this.fechaPedido}}</td>
            <td style="text-align: center;">${{#each this.carrito}}  {{ this.totalPrice }} {{/each}}.-</td>
            <td style="text-align: center;">{{# if this.pagado }}<span style="color:#33FF41" class="glyphicon glyphicon-ok"></span>{{else}}<span style="color:#FF3633" class="glyphicon glyphicon-remove"></span>{{/if}}</td>
            <td style="text-align: center;">{{# if this.entregado }}<span style="color:#33FF41" class="glyphicon glyphicon-ok"></span>{{else}}<span style="color:#FF3633" class="glyphicon glyphicon-remove"></span>{{/if}}</td>
            <td>
              <a onclick="infoPedido('{{ this._id }}')"><button  class="btn btn-primary" type="submit" data-toggle="tooltip" data-placement="top" title="Ver detalles"><span class="glyphicon glyphicon-search"></span></button></a>
              <a href="/listaPedido/editar/{{ this._id }}"><button  class="btn btn-primary" type="submit" data-toggle="tooltip" data-placement="top" title="Editar"><span class="glyphicon glyphicon-pencil"></span></button></a>
              <a href="/listaPedido/borrar/{{ this._id }}" onclick="return confirm('Esta seguro que desea borrar este pedido?')"><button class="btn btn-primary" type="submit" data-toggle="tooltip" data-placement="top" title="Borrar"><span class="glyphicon glyphicon-remove"></span></button></a>
            </td>
          </tr>
        {{/each }}
      {{ else }}
        <div class="row">
          <div class="col-sm-12 col-md-12">
            <h2>No tiene ningun pedido realizado</h2>
          </div>
        </div>
      {{/if}}
    </tbody>
  </table>
</div>

<button type="button" class="btn btn-primary hide" id="modalitoP" data-toggle="modal" data-target=".bs-modal-pedido">Small modal</button>
<div class="modal fade bs-modal-pedido" id="modalAviso" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel">
  <div class="modal-dialog modal-lg" style="margin:10% auto;" role="document">
    <div class="modal-content">
      <div class="modal-body">
        <p class="pedidoJson"></p>
        <p class="usuarioJson"></p>
        <hr>
        <button type="button" class="btn btn-success" class="close" data-dismiss="modal" aria-label="Close">OK</button>
      </div>
    </div><!-- /.modal-content -->
  </div>
</div>
{{>footer }}
